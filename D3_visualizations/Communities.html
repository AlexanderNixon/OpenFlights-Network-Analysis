<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>D3 World Map</title>
    <style>

    body,svg{
      width: 100%;
      height: 100%
    }
    svg {
      margin: 0;
      display: inherit;

    }

      path {
        stroke: white;
        stroke-width: 2px;
        fill: lightgrey;


      }



    </style>

    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script src="http://d3js.org/topojson.v0.min.js"></script>
  </head>
  <body>
    <script type="text/javascript">

    var bubbles = [ [4.7638897895799985, 52.308601379399995, 10.0, "#8A0808"],[8.5705556000000005, 50.033333299999995, 10.0, "#8A0808"],[2.5499999523199999, 49.012798309300003, 9.8000000000000007, "#8A0808"],[28.814599990799998, 40.976898193400004, 9.5999999999999996, "#8A0808"],[11.786100387572999, 48.353801727295, 9.4000000000000004, "#8A0808"],[55.364398956300001, 25.252799987800003, 7.2000000000000002, "#8A0808"],[-0.46194099999999999, 51.470599999999997, 7.0000000000000018, "#8A0808"],[-0.19027799367904666, 51.148101806640632, 6.2000000000000011, "#8A0808"],[2.0784599781035999, 41.297100067138999, 5.8500000000000014, "#8A0808"],[12.238888900000001, 41.800277799999996, 5.75, "#8A0808"],[-73.778900149999998, 40.639801030000001, 5.7000000000000011, "#8A0808"],[-3.56264, 40.471926000000003, 5.7000000000000011, "#8A0808"],[4.4844398498500002, 50.901401519799997, 5.5500000000000007, "#8A0808"],[-2.2749500274658203, 53.35369873046875, 5.25, "#8A0808"],[6.766779899597168, 51.289501190185547, 5.0000000000000009, "#8A0808"],[-6.2700700759887695, 53.421298980712891, 4.9500000000000002, "#8A0808"],[37.4146, 55.972599000000002, 4.8000000000000007, "#8A0808"],[16.569700241089002, 48.110298156738004, 4.8000000000000007, "#8A0808"],[8.5491695404053001, 47.464698791503999, 4.5500000000000007, "#8A0808"],[17.918600082396999, 59.651901245116996, 4.4500000000000002, "#8A0808"],[12.656000137328999, 55.617900848388999, 3.8000000000000003, "#8A0808"],[-4.499110221862793, 36.674900054931641, 3.7000000000000006, "#8A0808"],[8.7281100000000009, 45.630600000000001, 3.4499999999999997, "#8A0808"],[30.26250076293945, 59.800300598144531, 3.2500000000000004, "#8A0808"],[13.287699699400001, 52.559700012200004, 3.2500000000000004, "#8A0808"],[11.100399971008001, 60.193901062011996, 3.0999999999999996, "#8A0808"],[23.944499969499997, 37.936401367199998, 2.8499999999999996, "#8A0808"],[-9.1359195709200005, 38.781299591100002, 2.7999999999999998, "#8A0808"],[6.108950138092041, 46.23809814453125, 2.75, "#8A0808"],[14.26, 50.1008, 2.6499999999999995, "#8A0808"],[7.2158699035600007, 43.658401489300005, 2.2999999999999998, "#8A0808"],[24.963300704956001, 60.317199707031001, 2.0999999999999996, "#8A0808"],[9.9882297515869016, 53.630401611328004, 2.0499999999999998, "#8A0808"],[34.886699676513672, 32.011398315429695, 1.9499999999999997, "#8A0808"],[20.9671001434, 52.165699005100002, 1.5499999999999998, "#8A0808"],[14.477499999999999, 35.857498, 1.4999999999999996, "#8A0808"],[19.255599975599999, 47.436901092500001, 1.4499999999999997, "#8A0808"],[12.351900000000001, 45.505299000000001, 1.4499999999999997, "#8A0808"],[23.971099853515625, 56.923599243164062, 1.25, "#8A0808"],
    [-84.4281005859375, 33.636699676513672, 10.0, "#013ADF"],[-87.904800420000001, 41.978599549999998, 10.0, "#013ADF"],[-97.038002014160156, 32.896800994873054, 9.4705882352941178, "#013ADF"],[-104.672996521, 39.861698150635, 8.6042780748663112, "#013ADF"],[-95.341400146484375, 29.98439979553223, 7.737967914438503, "#013ADF"],[-74.168701171875, 40.692501068115227, 7.6898395721925139, "#013ADF"],[-118.40799709999999, 33.942501069999999, 6.9197860962566837, "#013ADF"],[-79.630599975599992, 43.677200317400001, 6.7272727272727284, "#013ADF"],[-80.943099975585938, 35.214000701904297, 6.6310160427807485, "#013ADF"],[-80.290603637695312, 25.79319953918457, 6.3422459893048133, "#013ADF"],[-83.353401184082031, 42.212398529052734, 6.1978609625668453, "#013ADF"],[-115.15200039999999, 36.08010101, 6.0534759358288772, "#013ADF"],[-93.221801757800009, 44.881999969500001, 5.9572192513368973, "#013ADF"],[-77.455802919999996, 38.944499970000003, 5.8609625668449192, "#013ADF"],[-75.241096496582031, 39.871898651123047, 5.6684491978609621, "#013ADF"],[-122.375, 37.618999481201172, 5.4759358288770059, "#013ADF"],[-71.005203249999994, 42.364299770000002, 4.6096256684491976, "#013ADF"],[-81.308998107910156, 28.429399490356445, 4.5133689839572195, "#013ADF"],[-80.152702331542969, 26.072599411010746, 4.4652406417112296, "#013ADF"],[-122.30899810791016, 47.449001312255859, 4.2245989304812834, "#013ADF"],[-111.97799682617188, 40.788398742675781, 4.0802139037433154, "#013ADF"],[-112.01200103759766, 33.434299468994141, 3.9839572192513368, "#013ADF"],[-77.037696999999994, 38.8521, 3.9358288770053487, "#013ADF"],[-86.877098083500002, 21.036500930800003, 3.9358288770053487, "#013ADF"],[-87.752403259277344, 41.785999298095703, 3.454545454545455, "#013ADF"],[-76.668296810000001, 39.175399779999999, 3.1657754010695185, "#013ADF"],[-82.533203125, 27.975500106811523, 3.0213903743315509, "#013ADF"],[-90.370002746582045, 38.748699188232422, 2.8770053475935828, "#013ADF"],[-117.190002441, 32.733600616499999, 2.4919786096256686, "#013ADF"],[-81.849800109900002, 41.411701202399996, 2.2994652406417115, "#013ADF"],[-86.678199768066406, 36.124500274658203, 2.251336898395722, "#013ADF"],[-84.667800903300005, 39.048801422099999, 1.8181818181818183, "#013ADF"],[-94.713898, 39.297600000000003, 1.8181818181818183, "#013ADF"],[-97.669898986816406, 30.194499969482425, 1.6256684491978612, "#013ADF"],[-90.258003234863281, 29.993400573730469, 1.5775401069518717, "#013ADF"],[-78.787498474121094, 35.877601623535156, 1.4331550802139037, "#013ADF"],[-80.232902530000004, 40.491500850000001, 1.4331550802139037, "#013ADF"],[-87.896598815917969, 42.947200775146477, 1.3368983957219251, "#013ADF"],
    [116.58499908447266, 40.080101013183601, 10.0, "#21610B"],[121.80500030517578, 31.143400192260746, 10.0, "#21610B"],[113.29900360107422, 23.392400741577148, 7.1775147928994087, "#21610B"],[113.915000916, 22.308900833100001, 6.9644970414201195, "#21610B"],[126.45099639892578, 37.469100952148438, 6.1124260355029589, "#21610B"],[103.99400300000001, 1.35019, 6.059171597633136, "#21610B"],[103.94699859619141, 30.578500747680664, 5.6331360946745566, "#21610B"],[121.233002, 25.0777, 4.7278106508875748, "#21610B"],[102.9291667, 25.101944399999997, 4.4615384615384617, "#21610B"],[106.64199829101562, 29.719200134277344, 4.0355029585798814, "#21610B"],[108.7519989013672, 34.447101593017578, 3.7159763313609471, "#21610B"],[113.81099700927734, 22.639299392700195, 3.5562130177514795, "#21610B"],[118.12799835205078, 24.544000625610352, 3.5562130177514795, "#21610B"],[120.43399810791016, 30.229499816894531, 2.8106508875739644, "#21610B"],[113.220001221, 28.189199447600004, 2.8106508875739644, "#21610B"],[114.20800018310548, 30.78380012512207, 2.7041420118343193, "#21610B"],[113.84100341799999, 34.519699096699995, 2.4911242603550301, "#21610B"],[118.86199951171876, 31.742000579833984, 1.9053254437869818, "#21610B"],[120.374000549, 36.266101837199997, 1.8520710059171597, "#21610B"],[117.346000671, 39.124401092500001, 1.8520710059171597, "#21610B"],[106.80100250244141, 26.53849983215332, 1.745562130177515, "#21610B"],[112.62799835205078, 37.746898651123047, 1.5325443786982249, "#21610B"],[119.66300201416016, 25.935100555419922, 1.4792899408284024, "#21610B"],[108.1719970703125, 22.60829925537109, 1.4792899408284024, "#21610B"],[110.03900146484376, 25.218099594116211, 1.3195266272189348, "#21610B"],[109.41200256347656, 18.302900314331051, 1.1597633136094674, "#21610B"],[110.45899963378906, 19.93490028381348, 1.1597633136094674, "#21610B"],
    [0.23499999940400002, 51.884998321499999, 10.0, "#04B4AE"],[2.7388100624099998, 39.551700591999996, 10.0, "#04B4AE"],[-0.55815601348876953, 38.282199859619141, 7.965217391304348, "#04B4AE"],[7.1427397727999997, 50.865898132299996, 5.53913043478261, "#04B4AE"],[-3.372499942779541, 55.950000762939453, 5.304347826086957, "#04B4AE"],[-16.572500228900001, 28.044500351, 4.9913043478260875, "#04B4AE"],[11.2887, 44.535400000000003, 4.6782608695652179, "#04B4AE"],[6.1421699523899997, 51.602401733400001, 3.0347826086956524, "#04B4AE"],
    [101.70999908446998, 2.7455799579619997, 10.0, "#8A4B08"],[39.156502000000003, 21.679600000000001, 9.4653465346534649, "#8A4B08"],[77.103103637695312, 28.566499710083011, 9.3762376237623766, "#8A4B08"],[54.651100158691406, 24.433000564575195, 8.217821782178218, "#8A4B08"],[72.867897033700004, 19.088699340799998, 7.5049504950495045, "#8A4B08"],[46.698799133300781, 24.957599639892575, 7.0594059405940595, "#8A4B08"],[55.517200469970703, 25.32859992980957, 6.7029702970297036, "#8A4B08"],[47.968898773193359, 29.226600646972656, 6.6138613861386135, "#8A4B08"],[58.284400939941406, 23.593299865722656, 4.653465346534654, "#8A4B08"],[49.797901153564453, 26.471200942993164, 4.3861386138613856, "#8A4B08"],[77.706299000000001, 13.197900000000001, 3.7623762376237622, "#8A4B08"],[50.633598327636719, 26.27079963684082, 3.1386138613861387, "#8A4B08"],[79.884101867675781, 7.1807599067687988, 3.1386138613861387, "#8A4B08"],[80.169296264648438, 12.990005493164062, 3.1386138613861387, "#8A4B08"],[76.401901245100007, 10.152000427200001, 3.0495049504950495, "#8A4B08"],[75.95529937740001, 11.1367998123, 1.4455445544554455, "#8A4B08"],[76.920097351099997, 8.4821195602399992, 1.089108910891089, "#8A4B08"],
    [37.906299591064453, 55.408798217773438, 10.0, "#7401DF"],[60.802700042725, 56.743099212646001, 10.0, "#7401DF"],[69.281196594199997, 41.257900238000005, 3.4107142857142856, "#7401DF"],[82.650703430175994, 55.012599945067997, 2.875, "#7401DF"],[39.170501708983998, 45.034698486328004, 2.6607142857142856, "#7401DF"],[92.493301391602003, 56.172901153563998, 1.6964285714285714, "#7401DF"],[68.824996948199995, 38.543300628699996, 1.4821428571428572, "#7401DF"],[104.38899993896, 52.268001556396001, 1.4821428571428572, "#7401DF"],[74.477600097700005, 43.061298370400003, 1.3214285714285716, "#7401DF"],
    [2.3794444000000001, 48.7233333, 10.0, "#7401DF"],[-7.5899701118469238, 33.367500305175781, 10.0, "#7401DF"],[5.2214241027800004, 43.439271921999996, 7.216494845360824, "#7401DF"],[5.0811110999999993, 45.725555600000007, 6.5670103092783512, "#7401DF"],[3.2154099941253662, 36.691001892089844, 5.824742268041236, "#7401DF"],[10.227199554443359, 36.851001739501953, 4.804123711340206, "#7401DF"],[-1.6107300519900001, 47.153198242200013, 4.2474226804123711, "#7401DF"],[-8.0362997055100021, 31.606899261500001, 3.7835051546391756, "#7401DF"],[-0.71555602550500008, 44.828300476099997, 3.1340206185567006, "#7401DF"],[1.36382, 43.629100999999999, 3.1340206185567006, "#7401DF"],[7.628230094909668, 48.538299560546882, 2.9484536082474229, "#7401DF"],
    [2.3794444000000001, 48.7233333, 10.0, "#FFFF00"],[-7.5899701118469238, 33.367500305175781, 10.0, "#FFFF00"],[5.2214241027800004, 43.439271921999996, 7.216494845360824, "#FFFF00"],[5.0811110999999993, 45.725555600000007, 6.5670103092783512, "#FFFF00"],[3.2154099941253662, 36.691001892089844, 5.824742268041236, "#FFFF00"],[10.227199554443359, 36.851001739501953, 4.804123711340206, "#FFFF00"],[-1.6107300519900001, 47.153198242200013, 4.2474226804123711, "#FFFF00"],[-8.0362997055100021, 31.606899261500001, 3.7835051546391756, "#FFFF00"],[-0.71555602550500008, 44.828300476099997, 3.1340206185567006, "#FFFF00"],[1.36382, 43.629100999999999, 3.1340206185567006, "#FFFF00"],[7.628230094909668, 48.538299560546882, 2.9484536082474229, "#FFFF00"],
    [-46.473056793212891, -23.435556411743164, 10.0, "#FFFF00"],[-47.134498596199997, -23.007400512699999, 10.0, "#FFFF00"],[-43.2505569458, -22.809999465900002, 5.013513513513514, "#FFFF00"],[-47.920833587646477, -15.869167327880859, 4.8918918918918912, "#FFFF00"],[-43.971942901611328, -19.624443054199219, 4.2837837837837842, "#FFFF00"],[-38.322498321499999, -12.9086112976, 3.0675675675675675, "#FFFF00"],[-51.171398162841797, -29.994400024414066, 2.4594594594594588, "#FFFF00"],[-49.175800323500006, -25.528499603299998, 2.3378378378378382, "#FFFF00"],[-43.163101196299998, -22.910499572800003, 1.7297297297297298, "#FFFF00"],
    [100.74700164794922, 13.681099891662598, 10.0, "#000000"],[140.38600158700001, 35.764701843299996, 10.0, "#000000"],[121.019997, 14.508599999999999, 8.1162790697674421, "#000000"],[139.779999, 35.552298999999998, 5.3953488372093021, "#000000"],[135.24400329589844, 34.427299499511719, 4.9767441860465116, "#000000"],[106.652000427, 10.818799972500001, 3.1976744186046511, "#000000"],[105.80699920654295, 21.221200942993164, 2.8837209302325579, "#000000"],[136.80499267578122, 34.8583984375, 2.0465116279069768, "#000000"],[130.45100402832028, 33.585899353027344, 1.7325581395348841, "#000000"],[128.93800354000001, 35.179500579799999, 1.1046511627906979, "#000000"],
    [28.245999999999999, -26.139199999999999, 10.0, "#3ADF00"],[31.405599594116211, 30.12190055847168, 10.0, "#3ADF00"],[38.799301147500003, 8.9778900146500007, 9.8636363636363651, "#3ADF00"],[36.927799224899999, -1.31923997402, 8.9090909090909101, "#3ADF00"],[39.202598571799996, -6.8781099319500001, 7.8181818181818183, "#3ADF00"],[32.443500518798828, 0.04238599911332129, 1.6818181818181817, "#3ADF00"],[30.139499664299997, -1.96862995625, 1.4090909090909089, "#3ADF00"],
    [-99.072097999999997, 19.436299999999999, 10.0, "#DF7401"],[-74.146900000000002, 4.7015900000000004, 10.0, "#DF7401"],[-79.383499145499997, 9.0713596344000003, 7.2608695652173907, "#DF7401"],[-77.114304000000004, -12.0219, 7.0, "#DF7401"],[-66.990585327100007, 10.6031169891, 5.0434782608695645, "#DF7401"],[-58.535800000000002, -34.822200000000002, 3.7391304347826089, "#DF7401"],[-70.785797119140625, -33.393001556396484, 2.9565217391304346, "#DF7401"],[-82.409103393554688, 22.989200592041016, 2.9565217391304346, "#DF7401"],[-78.357500000000002, -0.129166666667, 1.9130434782608696, "#DF7401"],
    [151.177001953125, -33.946098327636719, 10.0, "#642EFE"],[153.11700439453125, -27.384199142456051, 10.0, "#642EFE"],[144.84300231933594, -37.673301696777344, 7.1948051948051956, "#642EFE"],[174.79200744599999, -37.008098602300002, 6.4935064935064934, "#642EFE"],[115.96700286865234, -31.940299987792969, 5.9090909090909092, "#642EFE"],[145.755004883, -16.885799408, 4.5064935064935074, "#642EFE"],[138.531005859375, -34.944999694824219, 3.5714285714285712, "#642EFE"],[130.87699890136722, -12.414699554443359, 3.1038961038961039, "#642EFE"],[133.90199279785156, -23.806699752807614, 2.4025974025974026, "#642EFE"],
    [39.705101013183601, 24.553400039672852, 10.0, "#58FAF4"],[59.640998840332031, 36.235198974609375, 10.0, "#58FAF4"],[51.313400268554688, 35.689201354980469, 9.2058823529411757, "#58FAF4"],[52.589801788330078, 29.539199829101559, 8.6764705882352935, "#58FAF4"],[51.861301422119141, 32.750801086425781, 5.7647058823529402, "#58FAF4"],[48.762001037600001, 31.337400436399999, 2.5882352941176467, "#58FAF4"],[56.377799987792969, 27.218299865722656, 2.3235294117647056, "#58FAF4"],[46.235000610351562, 38.133899688720703, 1.7941176470588236, "#58FAF4"],[53.980201721199997, 26.526199340799998, 1.5294117647058822, "#58FAF4"],
[-103.31099700927734, 20.521799087524414, 10.0, "#DF013A"],[-116.97000122070312, 32.541099548339844, 10.0, "#DF013A"],[-100.10700225799999, 25.778499603299998, 7.6857142857142859, "#DF013A"],[-111.047996521, 29.095899581900007, 7.6857142857142859, "#DF013A"],[-105.96499633799999, 28.702899932900003, 2.8000000000000003, "#DF013A"],[-107.474998474, 24.764499664299997, 2.0285714285714285, "#DF013A"],[-106.4290008544922, 31.636100769042969, 1.2571428571428571, "#DF013A"],
[106.65599822999999, -6.1255698204, 10.0, "#DF013A"],[115.16699981689, -8.7481698989868004, 10.0, "#DF013A"],[119.5540008544922, -5.0616297721862784, 6.1176470588235299, "#DF013A"],[112.78700256347656, -7.3798298835754386, 3.2941176470588238, "#DF013A"],[104.119003296, 1.12102997303, 3.2941176470588238, "#DF013A"],[116.89399719200001, -1.2682700157200002, 1.7058823529411766, "#DF013A"],[110.43199920654295, -7.788179874420166, 1.1764705882352942, "#DF013A"],
[18.601699829099999, -33.964801788300001, 10.0, "#4C0B5F"],[31.119722222199997, -29.6144444444, 10.0, "#4C0B5F"],[25.617300033600003, -33.984901428200004, 5.2631578947368416, "#4C0B5F"],[27.825899124099998, -33.035598754900001, 1.0, "#4C0B5F"]







    ]


    var bubbles1 = [ [4.7638897895799985, 52.308601379399995, 10.0],[8.5705556000000005, 50.033333299999995, 10.0],[2.5499999523199999, 49.012798309300003, 9.7763975155279521],[28.814599990799998, 40.976898193400004, 9.5527950310559007],[11.786100387572999, 48.353801727295, 9.329192546583851],[55.364398956300001, 25.252799987800003, 6.8695652173913064],[-0.46194099999999999, 51.470599999999997, 6.6459627329192559],[-0.19027799367904666, 51.148101806640632, 5.7515527950310572],[2.0784599781035999, 41.297100067138999, 5.3602484472049694],[12.238888900000001, 41.800277799999996, 5.2484472049689446],[-73.778900149999998, 40.639801030000001, 5.1925465838509322],[-3.56264, 40.471926000000003, 5.1925465838509322],[4.4844398498500002, 50.901401519799997, 5.0248447204968958],[-2.2749500274658203, 53.35369873046875, 4.6894409937888195],[6.766779899597168, 51.289501190185547, 4.4099378881987583],[-6.2700700759887695, 53.421298980712891, 4.354037267080745],[37.4146, 55.972599000000002, 4.1863354037267086],[16.569700241089002, 48.110298156738004, 4.1863354037267086],[8.5491695404053001, 47.464698791503999, 3.9068322981366466],[17.918600082396999, 59.651901245116996, 3.7950310559006213],[12.656000137328999, 55.617900848388999, 3.0683229813664594],[-4.499110221862793, 36.674900054931641, 2.9565217391304355],[8.7281100000000009, 45.630600000000001, 2.6770186335403725],[30.26250076293945, 59.800300598144531, 2.4534161490683237],[13.287699699400001, 52.559700012200004, 2.4534161490683237],[11.100399971008001, 60.193901062011996, 2.2857142857142851],[23.944499969499997, 37.936401367199998, 2.0062111801242235],[-9.1359195709200005, 38.781299591100002, 1.9503105590062115],[6.108950138092041, 46.23809814453125, 1.8944099378881987],[14.26, 50.1008, 1.7826086956521738],[7.2158699035600007, 43.658401489300005, 1.3913043478260871],[24.963300704956001, 60.317199707031001, 1.1677018633540373],[9.9882297515869016, 53.630401611328004, 1.1118012422360251]
  ]

      var bubbles2 = [  [-84.4281005859375, 33.636699676513672, 10.0],[-87.904800420000001, 41.978599549999998, 10.0],[-97.038002014160156, 32.896800994873054, 9.272058823529413],[-104.672996521, 39.861698150635, 8.0808823529411775],[-95.341400146484375, 29.98439979553223, 6.8897058823529411],[-74.168701171875, 40.692501068115227, 6.8235294117647065],[-118.40799709999999, 33.942501069999999, 5.7647058823529402],[-79.630599975599992, 43.677200317400001, 5.5000000000000009],[-80.943099975585938, 35.214000701904297, 5.367647058823529],[-80.290603637695312, 25.79319953918457, 4.9705882352941178],[-83.353401184082031, 42.212398529052734, 4.7720588235294121],[-115.15200039999999, 36.08010101, 4.5735294117647065],[-93.221801757800009, 44.881999969500001, 4.4411764705882346],[-77.455802919999996, 38.944499970000003, 4.3088235294117645],[-75.241096496582031, 39.871898651123047, 4.0441176470588234],[-122.375, 37.618999481201172, 3.7794117647058831],[-71.005203249999994, 42.364299770000002, 2.5882352941176467],[-81.308998107910156, 28.429399490356445, 2.4558823529411762],[-80.152702331542969, 26.072599411010746, 2.3897058823529411],[-122.30899810791016, 47.449001312255859, 2.0588235294117645],[-111.97799682617188, 40.788398742675781, 1.8602941176470589],[-112.01200103759766, 33.434299468994141, 1.7279411764705881],[-77.037696999999994, 38.8521, 1.661764705882353],[-86.877098083500002, 21.036500930800003, 1.661764705882353]
  ]

 





      var width = 1000;
      var height = 510;
      var height2 = 370

      var projection = d3.geo.mercator().scale(162);

      var svg = d3.select("body").append("svg")
          .attr("viewBox", "0 0 " + width + " " + height2)
          .attr("width", width)
          .attr("height", height)

      var svg2 = d3.select("body").append("svg")
          .attr("viewBox", "0 0 " + width + " " + height2)
          .attr("width", width)
          .attr("height", height)



      var path = d3.geo.path()
          .projection(projection);


      var g = svg.append("g");
      var g2 = svg2.append("g");



      d3.json("world.json", function(error, topology) {
          g.selectAll("path")
            .data(topojson.object(topology, topology.objects.countries)
                .geometries)
            .enter().append("path")
            .attr("d", path)
            .on("click",clicked);

          svg.append("g")
          svg.selectAll("circle")
            .data(bubbles).enter()
            .append("circle")
            .attr("cx", function (d) { console.log(projection(d)); return projection(d)[0]; })
            .attr("cy", function (d) { return projection(d)[1]; })
            .attr("r", function (d) { return d[2]; })

            .style('fill-opacity', 0.5)
            .style('stroke', function(d) { return d[3]; })
            .style('fill', function(d) { return d[3]; })
            .style('stroke-width', 0.3)


});



      	// This function takes an object, the key names where it will find an array of lng/lat pairs, e.g. `[-74, 40]`
      	// And a bend parameter for how much bend you want in your arcs, the higher the number, the less bend.
      	function lngLatToArc(d, sourceName, targetName, bend){
      		// If no bend is supplied, then do the plain square root
      		bend = bend || 1 ;
      		// `d[sourceName]` and `d[targetname]` are arrays of `[lng, lat]`
      		// Note, people often put these in lat then lng, but mathematically we want x then y which is `lng,lat`

      		var sourceLngLat = d[sourceName],
      				targetLngLat = d[targetName];

      		if (targetLngLat && sourceLngLat) {
      			var sourceXY = projection( sourceLngLat ),
      					targetXY = projection( targetLngLat );

      			// Uncomment this for testing, useful to see if you have any null lng/lat values
      			// if (!targetXY) console.log(d, targetLngLat, targetXY)
      			var sourceX = sourceXY[0],
      					sourceY = sourceXY[1];

      			var targetX = targetXY[0],
      					targetY = targetXY[1];

      			var dx = targetX - sourceX,
      					dy = targetY - sourceY,
      					dr = Math.sqrt(dx * dx + dy * dy)*bend;

      			// To avoid a whirlpool effect, make the bend direction consistent regardless of whether the source is east or west of the target
      			var west_of_source = (targetX - sourceX) < 0;
      			if (west_of_source) return "M" + targetX + "," + targetY + "A" + dr + "," + dr + " 0 0,1 " + sourceX + "," + sourceY;
      			return "M" + sourceX + "," + sourceY + "A" + dr + "," + dr + " 0 0,1 " + targetX + "," + targetY;

      		} else {
      			return "M0,0,l0,0z";
      		}
      	}

      	// Zoom to feature on click
      	// This is optional but if you use mapstarter.com, you get it for free.
      	function clicked(d,i) {

      		//Add any other onClick events here
      		var x, y, k;

      		if (d && centered !== d) {
      	    // Compute the new map center and scale to zoom to
      			var centroid = path.centroid(d);
      			var b = path.bounds(d);
      			x = centroid[0];
      			y = centroid[1];
      			k = .8 / Math.max((b[1][0] - b[0][0]) / width, (b[1][1] - b[0][1]) / height);
      			centered = d
      		} else {
      			x = width / 2;
      			y = height / 2;
      			k = 1;
      			centered = null;
      		}

      		// Highlight the new feature
      		g.selectAll("path")
      			.classed("highlighted",function(d) {
      					return d === centered;
      			})
      			.style("stroke-width", 1 / k + "px"); // Keep the border width constant

      		//Zoom and re-center the whole map container
      		//Comment `.transition()` and `.duration()` to eliminate gradual zoom
      		svg
      			.transition()
      			.duration(500)
      			.attr("transform","translate(" + width / 2 + "," + height / 2 + ")scale(" + k + ")translate(" + -x + "," + -y + ")");
      	}



    </script>
  </body>
</html>
